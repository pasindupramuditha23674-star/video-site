<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Get Your Video</title>
  <style>
    :root { --accent: #16a34a; }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: system-ui, -apple-system, Arial, sans-serif;
      background: #0f172a;
      color: #e2e8f0;
    }
    .card {
      width: min(560px, 92vw);
      background: #111827;
      border: 1px solid #1f2937;
      border-radius: 16px;
      padding: 28px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      text-align: center;
    }
    h1 { margin: 0 0 8px; font-size: 1.35rem; }
    p  { margin: 6px 0 18px; color: #94a3b8; }
    .count {
      font-size: 2.75rem;
      font-weight: 700;
      letter-spacing: 2px;
      margin: 6px 0 18px;
    }
    .hidden { display: none; }
    .btn {
      display: inline-block;
      padding: 14px 22px;
      font-size: 1.05rem;
      font-weight: 600;
      border: 0;
      border-radius: 999px;
      background: var(--accent);
      color: white;
      cursor: pointer;
      transition: transform .06s ease, filter .2s ease;
      text-decoration: none;
    }
    .btn[disabled] { filter: saturate(0.2) brightness(.7); cursor: not-allowed; }
    .btn:hover { transform: translateY(-1px); }
    .tag { font-size: .9rem; color: #a3e635; }
    .err { color: #fca5a5; margin-top: 12px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Preparing your video…</h1>
    <p>Selected video: <span id="videoLabel" class="tag">detecting…</span></p>

    <div id="countWrap">
      <div class="count"><span id="count">5</span>s</div>
      <p>Please wait while we get things ready.</p>
    </div>

    <a id="goBtn" class="btn hidden" href="#" target="_blank" rel="noopener">Get Video</a>
    <div id="error" class="err hidden"></div>
  </div>

  <script>
    /************* EDIT THESE VALUES *************/

    // 1) Your bot username (only this part). Example: "Inboxthapaala01_bot"
    const BOT_USERNAME = "https://t.me/Inboxthapaala01_bot";

    // 2) Map which ?video=… value triggers which bot payload.
    //    Right side values are what your bot reads after /start (deep-link).
    //    Example: when user opens t.me/<bot>?start=video1 your bot should send Video 1.
    const VIDEO_PAYLOADS = {
      "1": "video1",
      "2": "video2",
      "3": "video3"
      // Add more like: "4": "video4"
    };

    // 3) Countdown seconds (change if you want a different wait time)
    const COUNTDOWN_SECONDS = 5;

    /************* DO NOT EDIT BELOW *************/
    const params = new URLSearchParams(location.search);
    const chosen = params.get("video") || params.get("v"); // supports ?video=1 or ?v=1
    const botBase = `https://t.me/${BOT_USERNAME}`;
    const payload = chosen && VIDEO_PAYLOADS[chosen];

    const labelEl = document.getElementById("videoLabel");
    const countEl = document.getElementById("count");
    const countWrap = document.getElementById("countWrap");
    const goBtn = document.getElementById("goBtn");
    const errEl = document.getElementById("error");

    // Validate the requested video
    if (!payload) {
      labelEl.textContent = "not found";
      countWrap.classList.add("hidden");
      goBtn.classList.add("hidden");
      errEl.textContent =
        "Invalid or missing video parameter. Please use a proper link like ?video=1";
      errEl.classList.remove("hidden");
    } else {
      labelEl.textContent = `#${chosen}`;
      // Prebuild bot deep-link with payload
      const botURL = `${botBase}?start=${encodeURIComponent(payload)}`;
      goBtn.href = botURL;
      goBtn.textContent = `Get Video ${chosen}`;

      // Countdown logic
      let t = COUNTDOWN_SECONDS;
      countEl.textContent = t;
      const tick = setInterval(() => {
        t -= 1;
        countEl.textContent = t;
        if (t <= 0) {
          clearInterval(tick);
          countWrap.classList.add("hidden");
          goBtn.classList.remove("hidden");
        }
      }, 1000);
    }
  </script>
</body>
</html>
